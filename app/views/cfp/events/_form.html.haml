= simple_form_for([:cfp, @event], html: {multipart: true}) do |f|
  %fieldset.inputs
    %legend= t("cfp.basic_information")
    = f.input :title
    = f.input :subtitle
    = f.input :event_type, collection: translated_options(Event::TYPES), :required => true
    = f.association :track, collection: @conference.tracks,  :required => true
    = f.input :long_event, as: :inline_boolean, hint: t("cfp.event_long_hint")
    = f.input :opensource_license, as: :inline_boolean, hint:  t("cfp.event_opensource_license")
    = f.input :do_not_record, as: :inline_boolean, hint: t("cfp.event_recording")
    / = f.input :time_slots, as: :select, collection: timeslots, hint: t("cfp.event_time_slots_hint")
    / = f.input :language, as: :language_select, only: @conference.language_codes, include_blank: true
    / = image_input_box(f.object.logo)
    / = f.input :logo
  %hr
  %fieldset.inputs
    %legend= t("cfp.detailed_description")
    = f.input :description, input_html: {rows: 10}, hint: t("cfp.event_description_hint"), :required => true
    = f.input :abstract, input_html: {rows: 4, minlength: 400, maxlength: 560}, hint: t("cfp.event_abstract_hint"),  :required => true
    = f.input :submission_note, hint: t("cfp.submission_note_hint")
  %hr
  %fieldset.inputs
    %legend= t("cfp.additional_informations")
    = dynamic_association :links, t("cfp.links"), f
    = dynamic_association :event_attachments, t("cfp.uploaded_files"), f

  .actions
    = f.button :submit, class: 'primary'


:javascript
  $(document).ready(function() {
    $(".simple_form").submit(function(e) {
      e.preventDefault();
      var length = $("#event_abstract").val().length;
      if (length >= 200 && length <= 560) {
        this.submit();
      } else {
        $(".error_abstract").remove();
        $(".event_abstract").find('label').append(
          '<span class="error error_abstract">Bitte mind. Zeichen 200 Beschreibung einf√ºgen.</span>'
        );
        // small delay to submit form again
        setTimeout(function(){
          $("input[type='submit']").removeAttr('disabled');
        }, 100);

      }
    });
  });
